# 发送数据
![](../photo/Pasted%20image%2020250822120234.png)
- **总结：发送数据只需要将待发送的数据写入SBUF即可**
1. 写数据。将待发送的8位数据写入**发送缓冲器（SBUF）**
2. 组装数据帧。此时**发送控制器（Tx Control）**就会开始工作，它会自动为数据添加起始位和结束位，从而构成一个完整的UART数据帧
3. 逐位通过TxD引脚输出出去
4. 产生中断。当完成一个数据帧的输出之后，发送控制器会将发送中断控制位TI置1，向CPU请求中断，CPU检测到中断请求后就执行相应的中断服务程序

# 接收数据
![](../photo/Pasted%20image%2020250822120624.png)
- **总结：接收数据需要先使能接收，也就是将REN控制位置1，然后开启串口中断，并在中断服务程序中读取SBUF。**
1. 默认情况下，串口并不会接收数据
2. 使能接收。将 **REN（Receive Enable）** 控制位置为1，REN控制位位于 **SCON** 寄存器
	![](../photo/Pasted%20image%2020250822121105.png)
3. 检测RxD引脚的起始位。**1到0跳变检测器（1-To-0 Transition Detector）** 就会开始工作，具体来讲就是不断检测RxD引脚的起始位
4. 接收数据。当检测到1到0的跳变后，就会启动**接收控制器（Rx Control）**，接收控制器会将接收到数据逐位移入到**输入移位寄存器（Input Shift REG）**，直到接收到停止位，就算完成了一帧数据的接收
5. 写入缓存区。正常情况下，接下来，**接收控制器** 会将 **输入移位寄存器（Input Shift REG）** 中的数据加载到 **读取缓冲器（SBUF）** 中，并将读取中断控制位RI置1，向CPU请求中断，CPU检测到中断请求后就执行相应的中断服务程序，开发者就能在中断服务程序中读取SBUF获取当前帧的数据了。
	- **结束位正常**
		- **开发者可以配置是否检测停止位的有效性（高电平有效）**
		- SM2=1时，接收控制器就会检测控制停止位，当SM2=0时，则不会检测停止位，建议将SM2设置为0
		- ![](../photo/Pasted%20image%2020250822121551.png)
	- 读取中断标志位为复位状态
		